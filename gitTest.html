<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Array.prototype.filter()</title>
</head>
<body>

    <h1>Array.prototype.filter()</h1>

    <p>arr.filter(callback(element, [, index[, array]])[, thisArg])</p>


<script>

    /* 모든 작은 값 걸러내기 */
    function isBigEnough(value){
        return value >= 10;
    }

    var filtered = [12, 5, 6, 140, 44].filter(isBigEnough)
    console.log(filtered);
    


    /* JSON에서 무효한 항목 거르기 */
    var arr = [
      { id: 15 },
      { id: -1 },
      { id: 0 },
      { id: 3 },
      { id: 12.2 },
      { },
      { id: null },
      { id: NaN },
      { id: 'undefined' }
    ];

    var invalidEntries = 0;

    function isNumber(obj){
        return obj !== undefined && typeof(obj) === 'number' && !isNaN(obj);
    }

    function filterByID(item){
        if(isNumber(item.id) && item.id !==0 ){
            return true;
        }
        invalidEntries++;
        return false;
    }

    var arrByID = arr.filter(filterByID);
    console.log('Filtered Array\n', arrByID);

    console.log('Number of Invalid Entries = ', invalidEntries)


    /* 배열 내용 검색 */
    /*var fruits = ['apple', 'banana', 'grapes', 'mango', 'orange'];
    // 검색 조건에 따른 배열 필터링(쿼리)
    function filterItems(query){
        return fruits.filter(function(el){
            return el.toLowerCase().indexOf(query.toLowerCase()) > -1
        })
    }
    console.log(filterItems('ap'));
    console.log(filterItems('an'));*/


    /* ES2015로 구현 */
    const fruits = ['apple', 'banana', 'grapes', 'mango', 'orange'];
    // 검색 조건에 따른 배열 필터링(쿼리)
    const filterItems = (query) => {
        return fruits.filter( el => {
            return el.toLowerCase().indexOf( query.toLowerCase() ) > -1
        })
    }
    console.log(filterItems('ap')); // ['apple', 'grapes']
    console.log(filterItems('an')); // ['banana', 'mango', 'orange']

</script>

</body>
</html>