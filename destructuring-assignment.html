<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>destructuring assignment (비구조화 할당)</title>
</head>
<body>
    <h1>destructuring assignment (비구조화 할당)</h1>
    <div>
        비구조화 할당(destructuring assignment) 구문은 배열 또는 객체에서 데이터를 별개(distinct) 변수로 추출할 수 있게 하는 JavaScript 식(expression)입니다.
    </div>
    <script type="text/javascript">

        /* destructuring assignment */

        /* 구문 */
        var a, b, rest;
        [a, b] = [1, 2];
        console.log(a); // 1
        console.log(b); // 2

        [a, b , ...rest] = [1, 2, 3, 4, 5];
        console.log(a); // 1
        console.log(b); // 2
        console.log(rest); // [3, 4, 5]

        ( {a, b} = {a:1 , b:2} );
        console.log(a); // 1
        console.log(b); // 2

        ( {a, b, ...rest} = { a:1, b:2, c:3, d:4 } );
        //ES2016 - Firefox 47a01에서 구현되지 않음
        console.log(a); // 1
        console.log(b); // 2
        console.log(rest); // {c: 3, d: 4}


        /* 임시(ad hoc) 데이터 패키지를 만드는 쉬운 방법을 제공 */
        var x = [1, 2, 3, 4, 5];
        var [y, z] = x;
        // [es5] var y = x[0];  var z = x[1];
        console.log(y); // 1
        console.log(z); // 2


        /* 배열 비구조화 */

        // 기본 변수 할당
        var foo = ["one", "two", "three"]; 
        var [one, two, three] = foo; 
        // [es5] var one = foo[0]; var two = foo[1]; var three = foo[2];
        console.log(one); // "one"
        console.log(two); // "two"
        console.log(three); // "three"

        // 선언에서 분리한 할당
        var a, b;
        [a, b] = [1, 2];
        console.log(a); // 1
        console.log(b); // 2

        // 기본값
        var a, b;
        [a=5, b=7] = [1];
        console.log(a); // 1
        console.log(b); // 7

        // 변수 교환하기
        var a = 1;
        var b = 3;
        [a, b] = [b, a];
        console.log(a); // 3
        console.log(b); // 1

        // 함수에서 반환된 배열 구문분석하기
        function f(){
            return [1, 2];
        }
        var a, b;
        [a, b] = f();
        console.log(a); // 1
        console.log(b); // 2

        // 일부 반환값 무시하기
        function f(){
            return [1, 2, 3];
        }
        [a, , b] = f();
        console.log(a); // 1
        console.log(b); // 3
        // 모든 값 무시
        [,,] = f();


        /* 객체 비구조화 */

        // 기본 할당
        var o = {p: 42, q: true};
        var {p, q} = o;  // [es5] var p = o.p; var q = o.q;
        console.log(p); // 42
        console.log(q); // true

        // 선언없는 할당
        var a, b;
        ({a, b} = {a:1, b:2});
        // 할당 문을 둘러싼 ( .. )는 선언 없이 객체 리터럴 비구조화 할당을 사용할 때 필요한 구문입니다.

        // 새로운 변수 이름에 할당하기
        var o = {p: 42, q: true};
        var {p:foo, q:bar} =  o;
        console.log(foo); // 42
        console.log(bar); // true 

        // 기본값
        var {a=10, b=5} = {a: 3};
        console.log(a); // 3
        console.log(b); // 5

    </script>
</body>
</html>
