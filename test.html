<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<title>test script</title>
</head>
<body>


<script>
	/* 1. Array.prototype.forEach() */
	console.log('1. Array.prototype.forEach()');
	console.log('');

	/* 배열 콘텐츠 인쇄 */
	console.log('배열 콘텐츠 인쇄');
	function logArrayElements(element, index, array){
		console.log('a[' +  index + '] = ' + element);
	}
	[2, 5, , 9].forEach(logArrayElements);
	console.log('');


	/* thisArg 사용 
	 * 배열의 각 항목에서 객체의 속성을 갱신
	 */
	console.log('thisArg 사용');
	function Counter(){
		this.sum = 0;
		this.count = 0;
	};
	Counter.prototype.add = function(array){;
		array.forEach(function(entry){
			this.sum += entry;
			++this.count;
		}, this);
	};

	var obj = new Counter;
	obj.add( [2, 5, 9] );
	console.log('obj.count', obj.count);
	console.log('obj.sum', obj.sum);
	console.log('');


	/* 객체 복사 함수 */
	console.log('객체 복사 함수');
	function copy(obj){
		var copy = Object.create(Object.getPrototypeOf(obj));
		var propNames = Object.getOwnPropertyNames(obj);

		propNames.forEach(function(name){
			var desc = Object.getOwnPropertyDescriptor(obj, name);
			Object.defineProperty(copy, name, desc);
		});
		return copy;
	}
	var obj1 = { a : 1, b : 2};
	var obj2 = copy(obj1);
	console.log(obj1, obj2);
	console.log('');

	/* polyfill */


	/* 2. Fucntion.prototype.bind */
	console.log('2. Funciton.prototype.bind()');

	/* 바인딩된 함수 생성 */
	this.x = 9;
	var module = {
		x : 81,
		getX : function(){
			return this.x;
		}
	};

	console.log( 'module.getX()', module.getX() ); // 81

	var retrieveX = module.getX;
	console.log( 'retrieveX()', retrieveX() );  // 9

	var boundGetX = retrieveX.bind(module);
	console.log( 'boundGetX()', boundGetX() ); // 81



</script>

</body>
</html>